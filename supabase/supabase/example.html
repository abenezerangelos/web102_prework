<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Supabase UI Wiring Demo</title>
  <style>
    body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto; margin: 2rem; }
    .card { max-width: 720px; padding: 1rem; border: 1px solid #ddd; border-radius: 12px; margin-bottom: 1rem; }
    #toast { position: fixed; right: 1rem; bottom: 1rem; background: #111; color: #fff; padding: .6rem .8rem; border-radius: 8px; opacity: 0; transition: opacity .3s; }
    #toast[data-type="error"] { background: #b91c1c; }
  </style>
</head>
<body>
  <h1>Supabase + Basic JS (Auth & Saves)</h1>

  <!-- Signed-out view -->
  <div class="card" data-auth="signed-out">
    <h2>Sign up</h2>
    <form id="signup-form">
      <input name="email" type="email" placeholder="you@example.com" required>
      <input name="password" type="password" placeholder="Create password" required minlength="8">
      <button>Sign up</button>
    </form>
    <hr>
    <h2>Sign in</h2>
    <form id="signin-form">
      <input name="email" type="email" placeholder="you@example.com" required>
      <input name="password" type="password" placeholder="Your password" required>
      <button>Sign in</button>
    </form>
  </div>

  <!-- Signed-in view -->
  <div class="card" data-auth="signed-in" style="display:none">
    <div style="display:flex; justify-content:space-between; align-items:center">
      <h2>Game Saves</h2>
      <button id="signout-btn">Sign out</button>
    </div>
    <label>Slot:
      <input id="slot" type="number" value="1" min="1" step="1" style="width:5rem">
    </label>
    <div style="display:flex; gap:1rem; margin-top:.5rem">
      <textarea id="game-json" rows="6" style="flex:1" placeholder='{"level":3,"hp":42,"items":["sword","potion"]}'></textarea>
      <pre id="output" style="flex:1; background:#f7f7f7; padding:.5rem; border-radius:8px; overflow:auto"></pre>
    </div>
    <div style="margin-top:.5rem; display:flex; gap:.5rem">
      <button id="save-btn">Save</button>
      <button id="load-btn">Load</button>
    </div>
    <p style="color:#373535; font-size:.9rem">This demo expects a <code>saves</code> table with RLS policies set as in the README.</p>
  </div>

  <div id="toast" role="status" aria-live="polite"></div>

  <!-- IMPORTANT: update the URL & anon key inside this module before using -->
  <script type="module" src="./auth-and-saves.js"></script>
</body>
</html>
